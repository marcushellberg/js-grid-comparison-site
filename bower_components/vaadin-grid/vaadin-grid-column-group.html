<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="vaadin-grid-column.html"></head><body><dom-module id="vaadin-grid-column-group"><script>Polymer({is:'vaadin-grid-column-group',behaviors:[vaadin.elements.grid.ColumnBaseBehavior],properties:{_childColumns:{value:function(){return Polymer.dom(this).querySelectorAll('vaadin-grid-column, vaadin-grid-selection-column')}},flexGrow:{type:Number,readOnly:!0},width:{type:String,readOnly:!0},_visibleChildColumns:Array,colSpan:{type:Number,notify:!0,readOnly:!0},_rootColumns:Array},observers:['_updateVisibleChildColumns(_childColumns)','_childColumnsChanged(_childColumns)','_flexGrowChanged(flexGrow)','_widthChanged(width)','_frozenChanged(_childColumns, frozen)','_hiddenChanged(hidden)','_visibleChildColumnsChanged(_visibleChildColumns)','_colSpanChanged(colSpan)','_orderChanged(_order, _rootColumns)','_reorderStatusChanged(_reorderStatus, _rootColumns)','_resizableChanged(resizable, _rootColumns)'],listeners:{'property-changed':'_columnPropChanged'},attached:function(){this._updateFlexAndWidth(this._visibleChildColumns),this._addNodeObserver()},detached:function(){Polymer.dom(this).unobserveNodes(this._observer)},_columnPropChanged:function(d){'hidden'===d.detail.path&&(this._preventHiddenCascade=!0,this._updateVisibleChildColumns(this._childColumns),this._preventHiddenCascade=!1),/flexGrow|width|hidden|_childColumns/.test(d.detail.path)&&this._updateFlexAndWidth(this._visibleChildColumns),'frozen'===d.detail.path&&(this.frozen=d.detail.value),'lastFrozen'===d.detail.path&&(this._lastFrozen=d.detail.value)},_orderChanged:function(d,f){if(d){var g=/(0+)$/.exec(d).pop().length,h=~~(Math.log(f.length)/Math.log(Math.LN10))+1,i=Math.pow(10,g-h),j=f.slice(0);j[0]&&j[0]._order&&j.sort(function(k,l){return k._order-l._order}),j.forEach(function(k,l){k._order=d+(l+1)*i}),this.fire('property-changed',{path:'order',value:d})}},_reorderStatusChanged:function(d,f){f.forEach(function(g){g._reorderStatus=d}),this.fire('property-changed',{path:'reorderStatus',value:d})},_resizableChanged:function(d,f){f.forEach(function(g){g.resizable=d}),this.fire('property-changed',{path:'resizable',value:d})},_updateVisibleChildColumns:function(d){this._visibleChildColumns=d.filter(function(f){return!f.hidden})},_childColumnsChanged:function(d){!this._autoHidden&&this.hidden&&(d.forEach(function(f){f.hidden=!0}),this._updateVisibleChildColumns(d)),this.fire('property-changed',{path:'_childColumns',value:d})},_updateFlexAndWidth:function(d){d.length?this._setWidth('calc('+d.reduce(function(f,g){return f+=' + '+(g.width||'0px').replace('calc','')},'').substring(3)+')'):this._setWidth('0px'),this._setFlexGrow(d.reduce(function(f,g){return f+g.flexGrow},0))},_frozenChanged:function(d,f){d.forEach(function(g){g.frozen=f}),this.fire('property-changed',{path:'frozen',value:f})},_hiddenChanged:function(d){this._rootColumns&&!this._preventHiddenCascade&&(this._ignoreVisibleChildColumns=!0,this._rootColumns.forEach(function(f){f.hidden=d}),this._ignoreVisibleChildColumns=!1),this.fire('property-changed',{path:'hidden',value:d})},_visibleChildColumnsChanged:function(d){this._setColSpan(d.length),this._ignoreVisibleChildColumns||(0===d.length?this._autoHidden=this.hidden=!0:this.hidden&&this._autoHidden&&(this._autoHidden=this.hidden=!1))},_colSpanChanged:function(d){this.fire('property-changed',{path:'colSpan',value:d})},_addNodeObserver:function(){this._observer=Polymer.dom(this).observeNodes(function(d){this._rootColumns=Polymer.dom(this).children.filter(function(g){return /column/.test(g.localName)});var f=function(h){return h.nodeType===Node.ELEMENT_NODE&&0===h.localName.indexOf('vaadin-grid-column')};(0<d.addedNodes.filter(f).length||0<d.removedNodes.filter(f).length)&&(this._childColumns=Polymer.dom(this).querySelectorAll('vaadin-grid-column'))}.bind(this))}});</script></dom-module></body></html>