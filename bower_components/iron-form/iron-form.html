<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-ajax/iron-ajax.html"><script>Polymer({is:'iron-form',extends:'form',properties:{disableNativeValidationUi:{type:Boolean,value:!1},withCredentials:{type:Boolean,value:!1},contentType:{type:String,value:'application/x-www-form-urlencoded'},headers:{type:Object,value:function(){return{}}},request:{type:Object}},listeners:{'iron-form-element-register':'_registerElement','iron-form-element-unregister':'_unregisterElement',submit:'_onSubmit',reset:'_onReset'},registered:function(){var b=document.createElement('form'),c=document.createElement('input');c.setAttribute('required','true'),b.appendChild(c);var d=document.createElement('input');d.setAttribute('type','submit'),b.appendChild(d),Polymer.clientSupportsFormValidationUI=!0,b.addEventListener('submit',function(f){Polymer.clientSupportsFormValidationUI=!1,f.preventDefault()}),d.click()},ready:function(){this.request=document.createElement('iron-ajax'),this.request.addEventListener('response',this._handleFormResponse.bind(this)),this.request.addEventListener('error',this._handleFormError.bind(this)),this._customElements=[],this._customElementsInitialValues=[]},submit:function(){if(!this.noValidate&&!this.validate())return Polymer.clientSupportsFormValidationUI&&!this.disableNativeValidationUi&&this._doFakeSubmitForValidation(),void this.fire('iron-form-invalid');var b=this.serialize();this.request.url=this.getAttribute('action'),this.request.method=this.getAttribute('method'),this.request.contentType=this.contentType,this.request.withCredentials=this.withCredentials,this.request.headers=this.headers,'POST'===this.method.toUpperCase()?this.request.body=b:this.request.params=b;var c=this.fire('iron-form-presubmit',{},{cancelable:!0});c.defaultPrevented||(this.request.generateRequest(),this.fire('iron-form-submit',b))},_onSubmit:function(b){return this.submit(),b&&b.preventDefault(),!1},_onReset:function(){this._resetCustomElements()},serialize:function(){function b(h,j){c[h]?(!Array.isArray(c[h])&&(c[h]=[c[h]]),c[h].push(j)):c[h]=j}for(var d,c={},f=0;d=this._customElements[f],f<this._customElements.length;f++)!this._isChildOfRegisteredParent(d)&&this._useValue(d)&&b(d.name,d.value);for(var d,f=0;d=this.elements[f],f<this.elements.length;f++)if(!this._isChildOfRegisteredParent(d)&&this._useValue(d))if('select'===d.tagName.toLowerCase()&&d.multiple)for(var g=0;g<d.options.length;g++)d.options[g].selected&&b(d.name,d.options[g].value);else b(d.name,d.value);return c},_handleFormResponse:function(b){this.fire('iron-form-response',b.detail)},_handleFormError:function(b){this.fire('iron-form-error',b.detail)},_registerElement:function(b){var c=Polymer.dom(b).rootTarget;c._parentForm=this,this._customElements.push(c),this._customElementsInitialValues.push(this._usesCheckedInsteadOfValue(c)?c.checked:c.value)},_unregisterElement:function(b){var c=b.detail.target;if(c){var d=this._customElements.indexOf(c);-1<d&&(this._customElements.splice(d,1),this._customElementsInitialValues.splice(d,1))}},validate:function(){for(var c,d,b=!0,f=0;d=this._customElements[f],f<this._customElements.length;f++)d.required&&!d.disabled&&(c=d,c.validate&&(b=!!c.validate()&&b));for(var d,f=0;d=this.elements[f],f<this.elements.length;f++)!d.hasAttribute('is')&&d.willValidate&&d.checkValidity&&(b=d.checkValidity()&&b);return b},_usesCheckedInsteadOfValue:function(b){return'checkbox'==b.type||'radio'==b.type||'checkbox'==b.getAttribute('role')||'radio'==b.getAttribute('role')||b._hasIronCheckedElementBehavior},_useValue:function(b){return b.disabled||!b.name?!1:!this._usesCheckedInsteadOfValue(b)||b.checked},_doFakeSubmitForValidation:function(){var b=document.createElement('input');b.setAttribute('type','submit'),b.style.display='none',this.appendChild(b),b.click(),this.removeChild(b)},_resetCustomElements:function(){this.async(function(){for(var b,c=0;b=this._customElements[c],c<this._customElements.length;c++)b.disabled||(this._usesCheckedInsteadOfValue(b)?b.checked=this._customElementsInitialValues[c]:(b.value=this._customElementsInitialValues[c],b.inputElement?b.inputElement.value=b.value:b.textarea&&(b.textarea.value=b.value)),b.invalid=!1);this.fire('iron-form-reset')},1)},_isChildOfRegisteredParent:function(b){for(var c=b;c&&c!==document&&c!=this;)if(c=Polymer.dom(c).parentNode||c.host,c&&c.name&&c._parentForm===this)return!0;return!1}});</script></head><body></body></html>